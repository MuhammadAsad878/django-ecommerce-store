{% extends "authBase.html" %}

{% block title %}
SignUp Sam Shoes
{% endblock title %}

{% block style %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/signup.css' %}" />
{% endblock style %}

{% block content %}

<div class="row" id="fonts">
  <div class="col-md-4 col-sm-10 bg-secondary m-auto mt-3 pb-3 rounded-4 signup text-light">
    <div class="row pt-4 bg-light text-dark rounded-4 rounded-bottom">
      <h1 class="col-8 d-flex align-items-center justify-content-center">
        SignUp
      </h1>
      <div class="col-4 d-flex align-items-end">
        <img src="{% static 'images/sam_logo.png' %}" alt="" height="100" width="100" />
      </div>
    </div>
    
    <form action="{% url 'signup' %}" class="bg-emphasis my-1 p-4 rounded-4 bg" method="post" id="signUpForm">
      {% csrf_token %}
      <div class="mb-3">
        <label for="username" class="form-label">Enter Username</label>
        <input type="text" id="username" placeholder="Enter Username" class="form-control" name="username" required />
      </div>

      <div class="mb-3">
        <label for="exampleInputEmail1" class="form-label">Email address</label>
        <input type="email" class="form-control" placeholder="Email address" name="email" id="exampleInputEmail1" required />
      </div>

      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">Enter Password</label>
        <div class="input-group">
          <input type="password" class="form-control" placeholder="Enter Password" name="password1" id="exampleInputPassword1" required />
          <button type="button" class="btn btn-outline-secondary bg-dark" id="togglePassword1">
            <i class="bi bi-eye-slash" id="eyeIcon1"></i>
          </button>
        </div>
      </div>

      <div class="mb-3">
        <label for="exampleInputPassword2" class="form-label">Confirm Password</label>
        <div class="input-group">
          <input type="password" class="form-control" placeholder="Confirm Password" name="password2" id="exampleInputPassword2" required />
          <button type="button" class="btn btn-outline-secondary bg-dark" id="togglePassword2">
            <i class="bi bi-eye-slash" id="eyeIcon2"></i>
          </button>
        </div>
      </div>

      <div class="pb-3 m-0 text-light-emphasis d-flex justify-content-end">
        Both password and confirm password must be equal!
      </div>

      <div class="row">
        <button type="submit" class="btn btn-primary px-5 col-10 m-auto" id="signUpBtn">Signup</button>
        <div class="col-12 d-flex justify-content-end pe-5">
          <a href="{% url 'loginPage' %}" class="text-light p-2">I already have an account.</a>
        </div>
      </div>
    </form>
  </div>
</div>

<script>
  // Toggle show/hide password functionality
  document.getElementById('togglePassword1').addEventListener('click', function () {
    var passwordField = document.getElementById('exampleInputPassword1');
    var icon = document.getElementById('eyeIcon1');
    
    if (passwordField.type === 'password') {
      passwordField.type = 'text';
      icon.classList.remove('bi-eye-slash');
      icon.classList.add('bi-eye');
    } else {
      passwordField.type = 'password';
      icon.classList.remove('bi-eye');
      icon.classList.add('bi-eye-slash');
    }
  });

  document.getElementById('togglePassword2').addEventListener('click', function () {
    var passwordField = document.getElementById('exampleInputPassword2');
    var icon = document.getElementById('eyeIcon2');
    
    if (passwordField.type === 'password') {
      passwordField.type = 'text';
      icon.classList.remove('bi-eye-slash');
      icon.classList.add('bi-eye');
    } else {
      passwordField.type = 'password';
      icon.classList.remove('bi-eye');
      icon.classList.add('bi-eye-slash');
    }
  });

  // Password mismatch check
  document.getElementById('signUpForm').addEventListener('submit', function (event) {
    var password1 = document.getElementById('exampleInputPassword1').value;
    var password2 = document.getElementById('exampleInputPassword2').value;
    
    if (password1 !== password2) {
      event.preventDefault();
    }
  });
</script>

{% endblock content %}
